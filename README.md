# CPEN211

## LAB 11 - Performance



## LAB 10 - I/O INTERRUPT
[DONE]: PART 1

[DONE]: PART 2

- ~~Create Part 2 Files~~

- ~~Add JTAG UART interrupt~~

- ~~Add timer (200MHz) interrupt before IDLE (generate interrupt every 0.5 seconds)~~

- ~~Add code to configure timer~~

- ~~Extend SERVICE_IRQ to process interrupts generated by the timer~~

- ~~Fix timer not triggering interrupt issue~~

[DONE]: PART 3

- ~~Create part 3 files~~

- ~~Configure JTAG UART to interrupt when detecting keyboard~~

- ~~Extend SERVICE_IRQ to process new interrupts~~

- ~~Modify IDLE loop~~

[IN PROGRESS]: PART 4

- ~~Create part 4 files~~

- ~~Create second process PROC1~~

- ~~Copy code from LAB 8 - PART 4~~

- ~~Remove code that updates LEDs~~

- ~~Create global variable CURRENT_PID~~

- ~~Add global array PD_ARRAY~~

- ~~Modify SERVICE_IRQ to store interrupted program to appropriate location~~

- ~~Save and restore PC properly~~???

- ~~Read and save status register using MRS (read) or MSR (write)~~

- ~~Save or restore LR and SP by changing CPU mode to Supervisor with disabled interrupt~~

- ~~Toggle CURRENT_PID~~

- ~~Load registers from the other process~~

- ~~Last two register (pc & lr) should be restored using `SUBS PC, LR, #4`~~

- Debug this piece of shit

Pseudo Code for step 7:

```
check which process it is (0 or 1)

if process 0:
store process 0 regs in first half
switch to process 1
load process 1 regs from second half

else process 1:
store process 1 regs in second half
switch to process 0
load process 0 regs from first half

get out IRQ

```

## LAB 9 - RECURSIVE FUNCTION

[X] TODO: Modify main function to test all three cases

[X] TODO: Modify main function to test each case only on HIGH switch signals

[X] TODO: Modify recursion function so middleIndex is stored in R11 and backed up to memory

[X] TODO: Modify recursion function so r4 is passed into stack as argument

[X] TODO: Modify recursion so all register that might get overwritten is backed up to memory

## LAB 7 - Branching

[X] TODO: added modifications to program counter

[X] TODO: make datapath and FSM work with new prog


## LAB 6 - RISC MACHINE PART 2 - MEMORIES AND FSM

**Implemented FSM controller and RAM for Datapath**
